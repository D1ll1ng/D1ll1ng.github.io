import{P as z,Q as $,S as tt,i as et,s as st,e as S,R as B,k as L,t as H,c as T,a as b,T as I,d as g,m as N,h as J,b as l,f as O,g as ot,G as m,U as K,j as W,E as X,V as nt,I as Y}from"./index-c547a399.js";import{D as at}from"./Document-598d047c.js";import{g as rt,a as Z}from"./firebase-4329e9e7.js";import{w as it}from"./index-1323b221.js";class P extends at{constructor(s={}){super(s),this._collection="counters",this.count=0,this._load(s),this._dbFields.push("count")}}function x(t){return Object.prototype.toString.call(t)==="[object Date]"}function V(t,s,e,r){if(typeof e=="number"||x(e)){const i=r-e,n=(e-s)/(t.dt||1/60),c=t.opts.stiffness*i,a=t.opts.damping*n,o=(c-a)*t.inv_mass,u=(n+o)*t.dt;return Math.abs(u)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,x(e)?new Date(e.getTime()+u):e+u)}else{if(Array.isArray(e))return e.map((i,n)=>V(t,s[n],e[n],r[n]));if(typeof e=="object"){const i={};for(const n in e)i[n]=V(t,s[n],e[n],r[n]);return i}else throw new Error(`Cannot spring ${typeof e} values`)}}function lt(t,s={}){const e=it(t),{stiffness:r=.15,damping:i=.8,precision:n=.01}=s;let c,a,o,u=t,_=t,w=1,f=0,y=!1;function M(h,d={}){_=h;const k=o={};if(t==null||d.hard||E.stiffness>=1&&E.damping>=1)return y=!0,c=z(),u=h,e.set(t=_),Promise.resolve();if(d.soft){const D=d.soft===!0?.5:+d.soft;f=1/(D*60),w=0}return a||(c=z(),y=!1,a=$(D=>{if(y)return y=!1,a=null,!1;w=Math.min(w+f,1);const C={inv_mass:w,opts:E,settled:!0,dt:(D-c)*60/1e3},v=V(C,u,t,_);return c=D,u=t,e.set(t=v),C.settled&&(a=null),!C.settled})),new Promise(D=>{a.promise.then(()=>{k===o&&D()})})}const E={set:M,update:(h,d)=>M(h(_,t),d),subscribe:e.subscribe,stiffness:r,damping:i,precision:n};return E}function ct(t){let s,e,r,i,n,c,a,o,u=Math.floor(t[0]+1)+"",_,w,f,y=Math.floor(t[0])+"",M,E,h,d,k,D,C;return{c(){s=S("div"),e=S("button"),r=B("svg"),i=B("path"),n=L(),c=S("div"),a=S("div"),o=S("strong"),_=H(u),w=L(),f=S("strong"),M=H(y),E=L(),h=S("button"),d=B("svg"),k=B("path"),this.h()},l(v){s=T(v,"DIV",{class:!0});var p=b(s);e=T(p,"BUTTON",{"aria-label":!0,class:!0});var G=b(e);r=I(G,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var R=b(r);i=I(R,"path",{d:!0,class:!0}),b(i).forEach(g),R.forEach(g),G.forEach(g),n=N(p),c=T(p,"DIV",{class:!0});var U=b(c);a=T(U,"DIV",{class:!0,style:!0});var j=b(a);o=T(j,"STRONG",{style:!0,"aria-hidden":!0,class:!0});var A=b(o);_=J(A,u),A.forEach(g),w=N(j),f=T(j,"STRONG",{class:!0});var q=b(f);M=J(q,y),q.forEach(g),j.forEach(g),U.forEach(g),E=N(p),h=T(p,"BUTTON",{"aria-label":!0,class:!0});var F=b(h);d=I(F,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var Q=b(d);k=I(Q,"path",{d:!0,class:!0}),b(k).forEach(g),Q.forEach(g),F.forEach(g),p.forEach(g),this.h()},h(){l(i,"d","M0,0.5 L1,0.5"),l(i,"class","svelte-139m1ow"),l(r,"aria-hidden","true"),l(r,"viewBox","0 0 1 1"),l(r,"class","svelte-139m1ow"),l(e,"aria-label","Decrease the counter by one"),l(e,"class","svelte-139m1ow"),O(o,"top","-100%"),l(o,"aria-hidden","true"),l(o,"class","svelte-139m1ow"),l(f,"class","svelte-139m1ow"),l(a,"class","counter-digits svelte-139m1ow"),O(a,"transform","translate(0, "+100*t[1]+"%)"),l(c,"class","counter-viewport svelte-139m1ow"),l(k,"d","M0,0.5 L1,0.5 M0.5,0 L0.5,1"),l(k,"class","svelte-139m1ow"),l(d,"aria-hidden","true"),l(d,"viewBox","0 0 1 1"),l(d,"class","svelte-139m1ow"),l(h,"aria-label","Increase the counter by one"),l(h,"class","svelte-139m1ow"),l(s,"class","counter svelte-139m1ow")},m(v,p){ot(v,s,p),m(s,e),m(e,r),m(r,i),m(s,n),m(s,c),m(c,a),m(a,o),m(o,_),m(a,w),m(a,f),m(f,M),m(s,E),m(s,h),m(h,d),m(d,k),D||(C=[K(e,"click",t[4]),K(h,"click",t[5])],D=!0)},p(v,[p]){p&1&&u!==(u=Math.floor(v[0]+1)+"")&&W(_,u),p&1&&y!==(y=Math.floor(v[0])+"")&&W(M,y),p&2&&O(a,"transform","translate(0, "+100*v[1]+"%)")},i:X,o:X,d(v){v&&g(s),D=!1,nt(C)}}}async function gt(t,s){if(s.user){const e=await t("/api/data?collectionPath=counters&createIfNone=true");if(e.ok)return(await e.json())[0];const{message:r}=await e.json();throw Error(r)}else return null}function ut(t,s){return(t%s+s)%s}function ft(t,s,e){let r,i,n,{counterData:c}=s;const a=rt(P,new P(c));Y(t,a,f=>e(8,n=f));let o;const u=lt();Y(t,u,f=>e(0,i=f));function _(){e(7,o.count-=1,o),Z(o)}function w(){e(7,o.count+=1,o),Z(o)}return t.$$set=f=>{"counterData"in f&&e(6,c=f.counterData)},t.$$.update=()=>{t.$$.dirty&256&&e(7,o=n||new P({count:0})),t.$$.dirty&128&&u.set(o.count),t.$$.dirty&1&&e(1,r=ut(i,1))},[i,r,a,u,_,w,c,o,n]}class _t extends tt{constructor(s){super(),et(this,s,ft,ct,st,{counterData:6})}}export{_t as C,gt as g};
